% --------------------------------------------
%  miestilo.sty  —  Estilo personal con cajas
%                 de teorema en español
% Fuente: 
% https://github.com/joaomlourenco/coloredtheorem
% --------------------------------------------
\ProvidesPackage{miestilo}[2025/08/03 v1.0 estilos de teorema]
\NeedsTeXFormat{LaTeX2e}

% --------------------------------------------
% Paquetes básicos
% --------------------------------------------
\RequirePackage[T1]{fontenc}
\RequirePackage{lmodern}
\RequirePackage[spanish]{babel}
\RequirePackage{textcomp}
\RequirePackage{geometry}
\geometry{margin=1in}

% --------------------------------------------
% Matemáticas y gráficos
% --------------------------------------------
\RequirePackage{amsmath,amssymb,amsfonts,amsthm}
\RequirePackage{thmtools}          % interfaz avanzada para amsthm
\RequirePackage{physics}
\RequirePackage{tikz}
\RequirePackage{qtree}
\RequirePackage{mathdots,yhmath,cancel,extarrows}
\tikzset{every picture/.style={line width=.8pt}}

% --------------------------------------------
% Otros paquetes útiles
% --------------------------------------------
\RequirePackage{array,multirow,tabularx,booktabs}
\RequirePackage{siunitx,gensymb}
\RequirePackage{xcolor}
\RequirePackage{hyperref}
\RequirePackage{dirtree}
\RequirePackage{tikz-qtree}
\RequirePackage{listings}


% --------------------------------------------
% Cajas de colores para resaltar código
% --------------------------------------------

\RequirePackage[most]{tcolorbox}
\newtcbox{\kbd}{on line,
  boxrule=0pt,
  colback=green!8,
  colframe=green!20,
  arc=2pt,
  left=2pt,right=2pt,top=1pt,bottom=1pt,
  boxsep=0pt
}


% --------------------------------------------
% Soporte de acentos en listings (UTF-8)
% --------------------------------------------
\lstset{
  literate=
   {á}{{\'a}}1
   {é}{{\'e}}1
   {í}{{\'i}}1
   {ó}{{\'o}}1
   {ú}{{\'u}}1
   {Á}{{\'A}}1
   {É}{{\'E}}1
   {Í}{{\'I}}1
   {Ó}{{\'O}}1
   {Ú}{{\'U}}1
   {ñ}{{\~n}}1
   {Ñ}{{\~N}}1
}


% --------------------------------------------
% Definir colores parar el código
% --------------------------------------------
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% --------------------------------------------
% Secciones
% --------------------------------------------
\RequirePackage{titlesec}
\titleformat{\section}
  {\large\bfseries\sffamily\color{blue}}{\thesection}{.5em}{}

% --------------------------------------------
%  Cajas de teorema (coloredtheorem+tcolorbox)
% --------------------------------------------
\RequirePackage{coloredtheorem}

% --- estilo “miestilo” (sin sombreado clásico) ---
\declaretheoremstyle[
  headfont       = \color{blue}\bfseries,
  bodyfont       = \itshape,
  headpunct      = {.},
  postheadspace  = 0.5em
]{miestilo}

% --- estilo “de código” (sin sombreado clásico) ---
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}

% --- cajas con tcolorbox a través de coloredtheorem ---
%   (colores: azul para definiciones, rojo para teoremas,
%    verde para corolarios, púrpura para lemas… cambia al gusto)
%
\cthnewtheorem{definicion}{Definición}[colback=blue!5,colframe=blue!75!black,coltitle=white!85!black,fonttitle=\bfseries]

\cthnewtheorem{teorema}{Teorema}[colback=red!5,colframe=red!65!black,coltitle=white!80!black,fonttitle=\bfseries]

\cthnewtheorem{corolario}{Corolario}[colback=green!5,colframe=green!60!black,coltitle=white!70!black,fonttitle=\bfseries]

\cthnewtheorem{lema}{Lema}[colback=purple!5,colframe=purple!60!black,coltitle=white!75!black,fonttitle=\bfseries]

\cthnewtheorem{proposicion}{Proposición}[colback=orange!5,colframe=white!70!black,coltitle=orange!85!black,fonttitle=\bfseries]

\cthnewtheorem{ejemplo}{Ejemplo}[colback=gray!8,colframe=gray!60,coltitle=white!20!black,fonttitle=\bfseries]

\cthnewtheorem{nota}{Nota}[colback=yellow!10,colframe=yellow!65!black,coltitle=white!80!black,fonttitle=\bfseries]

\cthnewtheorem{observacion}{Observación}[colback=teal!6,colframe=teal!60!black,coltitle=white!75!black,fonttitle=\bfseries]

% --------------------------------------------
% Alias “legacy” (por compatibilidad con ntheorem)
% --------------------------------------------
\let\theorem     \cthteorema
\let\endtheorem  \endcthteorema
\let\definition  \cthdefinicion
\let\enddefinition\endcthdefinicion
\let\corollary   \cthcorolario
\let\endcorollary\endcthcorolario
\let\lemma       \cthlema
\let\endlemma    \endcthlema
\let\proposition \cthproposicion
\let\endproposition\endcthproposicion
\let\example     \cthejemplo
\let\endexample  \endcthejemplo
\let\remark      \cthnota
\let\endremark   \endcthnota
