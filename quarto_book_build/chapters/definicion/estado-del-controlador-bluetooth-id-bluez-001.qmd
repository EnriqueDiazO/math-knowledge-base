---
title: Estado del controlador Bluetooth
bibliography: ../../references.bib
---

## Contenido

```{=latex}
\begin{definition}{Estado del controlador Bluetooth (BlueZ Controller Health Check)}
\textbf{Idea central.}
Este concepto describe la \emph{verificación mínima y reproducible} del estado del
\emph{controlador Bluetooth} (adaptador físico + driver + stack BlueZ) desde el punto de vista
del sistema operativo.

\medskip

\textbf{Contexto.}
En GNU/Linux, BlueZ actúa como el \emph{stack oficial de Bluetooth}. La herramienta
\kbd{bluetoothctl} permite inspeccionar el \emph{estado actual} del controlador y de los
dispositivos asociados. Antes de intentar emparejar (pair) o conectar (connect) un dispositivo,
es obligatorio confirmar que el controlador está operativo.

\medskip

\textbf{Objetivo (por qué importa).}
Esta verificación evita depurar fallos de emparejamiento que en realidad provienen
de un controlador apagado, un servicio inconsistente, o un estado intermedio del stack.
En particular, permite detectar tempranamente:
\begin{itemize}
  \item Bluetooth desactivado a nivel de software/hardware.
  \item Controlador inexistente o no reconocido por el sistema.
  \item Estado no apto para iniciar \kbd{scan}, \kbd{pair} o \kbd{connect}.
\end{itemize}

\medskip

\textbf{Procedimiento (diagnóstico mínimo).}
El comando siguiente consulta el estado global del controlador BlueZ:

\begin{lstlisting}[language=bash, caption={Diagnóstico mínimo del controlador Bluetooth}]
bluetoothctl show
\end{lstlisting}

\medskip

\textbf{Variables observables (salida típica).}
La salida de \kbd{bluetoothctl show} contiene propiedades que caracterizan el estado del controlador:
\begin{itemize}
  \item \kbd{Controller <MAC>} identifica el adaptador activo.
  \item \kbd{Powered: yes/no} indica si el controlador está encendido.
  \item \kbd{Pairable: yes/no} indica si el host permite emparejar nuevos dispositivos.
  \item \kbd{Discoverable: yes/no} indica si el host se anuncia públicamente (solo se habilita temporalmente).
  \item \kbd{Discovering: yes/no} indica si hay un escaneo activo en curso.
\end{itemize}

\medskip

\textbf{Invariantes (condición de salud mínima).}
Decimos que el controlador está en un estado mínimamente saludable si se cumple:
\begin{itemize}
  \item Existe un \kbd{Controller <MAC>} (el sistema reconoce el adaptador).
  \item \kbd{Powered: yes} (Bluetooth está encendido y operativo).
\end{itemize}

\medskip

\textbf{Interpretación operacional.}
\begin{itemize}
  \item Si \kbd{Powered: no}, entonces cualquier intento de \kbd{scan}, \kbd{pair} o \kbd{connect}
  fallará directa o indirectamente.
  \item Si \kbd{Controller <MAC>} no aparece, el problema suele ser de hardware/driver
  o inicialización del servicio (no del dispositivo externo).
  \item Si \kbd{Pairable: no}, el controlador puede estar sano, pero no acepta emparejar nuevos dispositivos.
  Esto se corrige con \kbd{pairable on} dentro de \kbd{bluetoothctl} cuando se requiere emparejar.
\end{itemize}

\medskip

\textbf{Ejemplo (salida real).}
El siguiente resultado corresponde a un sistema donde el adaptador existe y está encendido
(\kbd{Powered: yes}), no está anunciándose públicamente (\kbd{Discoverable: no}) y no está en modo de emparejamiento
(\kbd{Pairable: no}):

\begin{lstlisting}[language=bash, caption={Ejemplo real: salida de bluetoothctl show}]
enriquedo:~ $ bluetoothctl show
Controller 84:14:4D:BD:18:7E (public)
    Name: enriquedo-System-Product-Name
    Alias: enriquedo-System-Product-Name
    Class: 0x007c0104
    Powered: yes
    Discoverable: no
    DiscoverableTimeout: 0x000000b4
    Pairable: no
    UUID: Message Notification Se.. (00001133-0000-1000-8000-00805f9b34fb)
    UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
    UUID: OBEX Object Push          (00001105-0000-1000-8000-00805f9b34fb)
    UUID: Message Access Server     (00001132-0000-1000-8000-00805f9b34fb)
    UUID: PnP Information           (00001200-0000-1000-8000-00805f9b34fb)
    UUID: IrMC Sync                 (00001104-0000-1000-8000-00805f9b34fb)
    UUID: Vendor specific           (00005005-0000-1000-8000-0002ee000001)
    UUID: Headset                   (00001108-0000-1000-8000-00805f9b34fb)
    UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
    UUID: Generic Attribute Profile (00001801-0000-1000-8000-00805f9b34fb)
    UUID: Phonebook Access Server   (0000112f-0000-1000-8000-00805f9b34fb)
    UUID: Device Information        (0000180a-0000-1000-8000-00805f9b34fb)
    UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
    UUID: Generic Access Profile    (00001800-0000-1000-8000-00805f9b34fb)
    UUID: Handsfree Audio Gateway   (0000111f-0000-1000-8000-00805f9b34fb)
    UUID: Audio Source              (0000110a-0000-1000-8000-00805f9b34fb)
    UUID: OBEX File Transfer        (00001106-0000-1000-8000-00805f9b34fb)
    Modalias: usb:v1D6Bp0246d0540
    Discovering: no
    Roles: central
    Roles: peripheral
Advertising Features:
    ActiveInstances: 0x00 (0)
    SupportedInstances: 0x0c (12)
    SupportedIncludes: tx-power
    SupportedIncludes: appearance
    SupportedIncludes: local-name
    SupportedSecondaryChannels: 1M
    SupportedSecondaryChannels: 2M
    SupportedSecondaryChannels: Coded
enriquedo:~ $
\end{lstlisting}

\medskip


\end{definition}

```

## Referencias

[@debian-manpages-bluez-2024-manual-oficial-bluetoothctl-manpage, sec. Commands: scan, pair, trust, connect, info]
